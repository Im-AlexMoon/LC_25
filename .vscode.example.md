# .vscode Configuration Guide

This document explains the structure and purpose of each JSON configuration file in the `.vscode/` folder. These files are essential for setting up VS Code for C++ development with CMake.

## File Overview

The `.vscode/` folder contains four configuration files:

```
.vscode/
├── c_cpp_properties.json    # IntelliSense and compiler configuration
├── settings.json            # VS Code editor and extension settings
├── tasks.json              # Build and compilation tasks
└── launch.json             # Debugger configuration
```

## 1. `c_cpp_properties.json`

**Purpose:** Configures IntelliSense, compiler paths, and C++ standard settings.

### Key Properties

```json
{
  "configurations": [
    {
      "name": "Windows",                          // Configuration name
      "includePath": ["${workspaceFolder}/**"],   // Header file search paths
      "defines": ["_WIN32", "__GNUC__"],          // Preprocessor definitions
      "compilerPath": "C:/msys64/ucrt64/bin/g++.exe", // Path to your compiler
      "cStandard": "c17",                         // C standard version
      "cppStandard": "c++17",                     // C++ standard version
      "intelliSenseMode": "windows-gcc-x64",      // IntelliSense engine
      "configurationProvider": "ms-vscode.cmake-tools", // Use CMake for config
      "browse": {
        "path": ["${workspaceFolder}"],           // Files to analyze
        "limitSymbolsToIncludedHeaders": true     // Performance optimization
      }
    }
    // ... Additional configurations for Linux and Mac
  ],
  "version": 4
}
```

### Important Notes

- **`compilerPath`**: Points to your g++/clang/cl.exe compiler. Update this if your compiler location differs.
- **`intelliSenseMode`**:
  - `windows-gcc-x64` for MinGW/GCC
  - `windows-msvc-x64` for Visual Studio MSVC
  - `linux-gcc-x64` for Linux GCC
  - `macos-clang-x64` for Mac Clang
- **`cppStandard`**: This project uses C++17. Change to `c++20` or `c++23` if needed.

### Troubleshooting IntelliSense

If you see `#include` errors in red:
1. Verify `compilerPath` points to your actual compiler
2. Check `includePath` is set to `${workspaceFolder}/**`
3. Run `Ctrl+Shift+P` → "C/C++: Reset IntelliSense"

---

## 2. `settings.json`

**Purpose:** Global VS Code and C++ extension settings for this workspace.

### Key Settings

```json
{
  "C_Cpp.default.configurationProvider": "ms-vscode.cmake-tools",
  // Uses CMake to automatically configure IntelliSense

  "C_Cpp.intelliSenseEngine": "Tag Parser",
  // Fast IntelliSense engine (alternative: "Default" for more features)

  "C_Cpp.codeAnalysis.runAutomatically": true,
  // Enable static analysis while typing

  "C_Cpp.codeAnalysis.clangTidy.enabled": true,
  // Enable clang-tidy for additional code analysis

  "C_Cpp.codeAnalysis.clangTidy.args": [
    "--checks=-clang-diagnostic-error"
  ],
  // Suppress false positive errors (e.g., __float128 warnings)

  "files.exclude": {
    "build/": true,      // Hide build folder from file explorer
    ".vscode/": false    // Show .vscode folder
  },

  "search.exclude": {
    "build/": true       // Exclude build folder from search
  },

  "editor.formatOnSave": true,
  // Auto-format code when saving

  "C_Cpp.formatting": "Default",
  // Use default C++ formatter

  "[cpp]": {
    "editor.defaultFormatter": "ms-vscode.cpptools",
    "editor.formatOnSave": true
  },
  // C++ specific formatting settings

  "[c]": {
    "editor.defaultFormatter": "ms-vscode.cpptools",
    "editor.formatOnSave": true
  }
  // C specific formatting settings
}
```

### Customization Tips

- **Disable auto-format**: Set `"editor.formatOnSave": false`
- **Change formatter**: Use `"C_Cpp.codeAnalysis.clangTidy.enabled": false` to disable analysis
- **Adjust clang-tidy checks**: Modify the `args` array to enable/disable specific checks

---

## 3. `tasks.json`

**Purpose:** Defines build and compilation tasks that can be run with `Ctrl+Shift+B`.

### Main Tasks

```json
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Build and Compile",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "${workspaceFolder}/build",
        "--config",
        "Debug"
      ],
      "group": {
        "kind": "build",
        "isDefault": true  // Runs when you press Ctrl+Shift+B
      },
      "problemMatcher": ["$gcc"]  // Parse compiler errors
    },
    {
      "label": "Configure CMake",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-B",
        "${workspaceFolder}/build",
        "-G",
        "Unix Makefiles"
      ]
    },
    {
      "label": "Clean Build",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "${workspaceFolder}/build", "--target", "clean"]
    }
  ]
}
```

### Running Tasks

- **Default build**: Press `Ctrl+Shift+B`
- **Custom task**: Press `Ctrl+Shift+B` → Select a task from the list
- **Terminal**: Type the command directly (e.g., `cmake --build build`)

### Variables Used

- `${workspaceFolder}`: Root directory of your project
- `${workspaceFolderBasename}`: Project folder name
- `${file}`: Currently open file path
- `${fileBasename}`: Current file name

---

## 4. `launch.json`

**Purpose:** Configures the debugger for running and debugging your C++ programs.

### Debug Configurations

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug C++ (Windows)",
      "type": "cppvsdbg",              // Visual Studio debugger
      "request": "launch",
      "program": "${workspaceFolder}/build/bin/${fileBasenameNoExtension}.exe",
      "args": [],                      // Command-line arguments
      "stopAtEntry": false,            // Stop at main() function
      "cwd": "${workspaceFolder}",     // Working directory
      "environment": [],
      "console": "integratedTerminal",
      "preLaunchTask": "Build and Compile"  // Build before debugging
    },
    {
      "name": "Debug C++ (GDB - Linux/Mac)",
      "type": "cppdbg",                // GDB debugger
      "request": "launch",
      "program": "${workspaceFolder}/build/bin/${fileBasenameNoExtension}",
      "args": [],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}",
      "environment": [],
      "externalConsole": false,
      "MIMode": "gdb",
      "setupCommands": [
        {
          "description": "Enable pretty-printing",
          "text": "-enable-pretty-printing",
          "ignoreFailures": true
        }
      ],
      "preLaunchTask": "Build and Compile"
    }
  ]
}
```

### How to Debug

1. **Set breakpoint**: Click on line number in your code
2. **Start debugging**: Press `F5` and select "Debug C++ (Windows)" or Linux/Mac variant
3. **Debug controls**:
   - `F5` or green ▶: Continue execution
   - `F10`: Step over (skip into functions)
   - `F11`: Step into (enter functions)
   - `Shift+F11`: Step out (exit function)
   - `Shift+F5`: Stop debugging
4. **Watch variables**: Hover over variables or add to Watch panel

### Configuration Details

- **`program`**: Path to the compiled executable (auto-determined from current file)
- **`stopAtEntry`**: Set to `true` to pause at main() automatically
- **`console`**: Use `"integratedTerminal"` for output in VS Code terminal
- **`preLaunchTask`**: Automatically builds before debugging (requires task name from tasks.json)

---

## Common Issues and Solutions

### Problem: IntelliSense shows errors but code compiles

**Solution**:
1. Check `compilerPath` in `c_cpp_properties.json` points to correct compiler
2. Reset IntelliSense: `Ctrl+Shift+P` → "C/C++: Reset IntelliSense"
3. Verify `cppStandard` matches your CMakeLists.txt

### Problem: Build fails with "Unknown compiler"

**Solution**:
1. Verify compiler is installed and in PATH
2. Run `Ctrl+Shift+P` → "CMake: Select a Kit"
3. Choose your compiler (GCC, MSVC, Clang)

### Problem: Debugger won't start

**Solution**:
1. Build first: `Ctrl+Shift+B`
2. Verify executable exists: `./build/bin/your_file.exe`
3. Check `launch.json` has correct `program` path
4. Try different debugger: `cppvsdbg` for Windows, `cppdbg` for Linux/Mac

### Problem: __float128 errors appear

**Solution**: This is a false positive with MinGW. Already handled by:
```json
"C_Cpp.codeAnalysis.clangTidy.args": [
  "--checks=-clang-diagnostic-error"
]
```
See `Setup_guide.md` for more details.

---

## Quick Reference: Variable Substitutions

| Variable | Example Value |
|----------|---------------|
| `${workspaceFolder}` | `/path/to/project` |
| `${workspaceFolderBasename}` | `LC_25` |
| `${file}` | `/path/to/project/src/two_sum.cpp` |
| `${fileBasename}` | `two_sum.cpp` |
| `${fileBasenameNoExtension}` | `two_sum` |
| `${fileDirname}` | `/path/to/project/src` |
| `${lineNumber}` | `42` |

---

## When to Modify These Files

- **c_cpp_properties.json**: Change compiler path, C++ standard, or add include paths
- **settings.json**: Customize editor behavior, formatting, or code analysis
- **tasks.json**: Add new build tasks or change build commands
- **launch.json**: Add new debug configurations or change debugger settings

For most users, the default configurations in this project should work without modifications. Only edit if you have a specific need or encounter issues.

---

## Additional Resources

- [VS Code C++ Configuration](https://code.visualstudio.com/docs/cpp/c-cpp-properties)
- [CMake Tools Extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools)
- [GDB Debugging](https://sourceware.org/gdb/current/onlinedocs/gdb/)
- [MSVC Debugger](https://docs.microsoft.com/en-us/visualstudio/debugger/)
